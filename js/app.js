document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".header__menu"),t=document.getElementById("mobileNav"),n=document.getElementById("navOverlay"),o=document.getElementById("navCloseBtn"),d=()=>{t&&n&&(t.classList.remove("is-open"),n.classList.remove("is-open"),document.body.classList.remove("nav-open"),t.setAttribute("aria-hidden","true"),n.setAttribute("aria-hidden","true"))};e&&t&&n&&o&&(e.addEventListener("click",(()=>{t.classList.add("is-open"),n.classList.add("is-open"),document.body.classList.add("nav-open"),t.setAttribute("aria-hidden","false"),n.setAttribute("aria-hidden","false")})),o.addEventListener("click",d),n.addEventListener("click",d),document.addEventListener("keydown",(e=>{"Escape"===e.key&&d()})),t.querySelectorAll('a[href^="#"]').forEach((e=>{e.addEventListener("click",(t=>{const n=e.getAttribute("href"),o=n?document.querySelector(n):null;o&&(t.preventDefault(),d(),o.scrollIntoView({behavior:"smooth",block:"start"}))}))})));const l=document.querySelectorAll(".registerBtn"),a=document.getElementById("registrationModal"),r=document.getElementById("closeModalBtn"),i=document.querySelector(".homeModalOverlay"),s=document.getElementById("registrationForm"),c=document.getElementById("phone"),m=document.getElementById("phoneError"),u=document.getElementById("submitBtn"),y=window.phoneFormatter;let v=!1,E=0;const h=()=>{a&&(d(),v=!0,E=window.scrollY||0,a.style.display="block",document.body.style.overflow="hidden",m&&(m.style.display="none"),c&&c.focus())},p=()=>{a&&v&&(v=!1,a.style.display="none",document.body.style.overflow="",window.scrollTo(0,E))};l.forEach((e=>e.addEventListener("click",h))),r?.addEventListener("click",p),i?.addEventListener("click",p),document.addEventListener("keydown",(e=>{"Escape"===e.key&&p()})),s?.addEventListener("submit",(e=>{if(e.preventDefault(),!y)return console.error("phoneFormatter is not initialized. Check load order."),void(m&&(m.style.display="block"));const t=(c?.value||"").trim();if(!y.validate(t))return void(m&&(m.style.display="block"));m&&(m.style.display="none"),u&&(u.textContent="YUBORILMOQDA...",u.disabled=!0);const n=new Date,o=n.toLocaleDateString("uz-UZ"),d=n.toLocaleTimeString("uz-UZ"),l={TelefonRaqam:`${y.getCurrentCode()} ${t}`,SanaSoat:`${o} - ${d}`};localStorage.setItem("formData",JSON.stringify(l)),c&&(c.value=""),p(),window.location.href="/thankYou.html",u&&(u.textContent="DAVOM ETISH",u.disabled=!1)}));const g=document.getElementById("timer");if(g){let e=120;const t=()=>{const t=Math.floor(e/60),o=e%60;g.textContent=`${String(t).padStart(2,"0")}:${String(o).padStart(2,"0")}`,e<=0?clearInterval(n):e-=1};t();const n=setInterval(t,1e3)}}));